# 性能优化的方向

性能优化，从高层来看，有这个核心方向。

- 避免不必要的计算
- 采用更合适的算法
- 提高计算绝对速度

这几个方向基本上是正交的，你可以做一些独立的优化来分别优化计算速度，改进算法，或者避免不必要的计算发生。

## 提高计算的绝对速度

主要做法有

- 改进数据的布局和访问模式
- 采用simd
- 采用并行计算多线程
- 采用其他高性能外部计算设备，比如gpu

所以这类做法，高度依赖对执行环境的了解和控制。在一些平台比如web，其执行环境是非常受限的，所以在web上，基本上没有办法科学稳定的去优化（javascript的）性能。

因为其对计算环境的依赖，所以这类优化的实现一般需要和保守实现共存，否则可能会对产品的兼容性造成影响。其降级行为和策略，在工程和产品部署上都有额外的复杂度要处理。

## 采用更合适的算法

主要做法有

- 采用低复杂度或者普遍认同的更优解的算法
- 根据实际数据情况选择更合理的算法
  - 依赖业务的先验知识

采用更合适的算法和提高计算绝对速度有可能会相互制约，即上文表述中的「基本上正交」的例外情况。

- 算法可能直接决定了数据的布局和访问要求，或者说数据的布局的优化要求要为具体算法而设计。
- 某些算法不能有效的在某些硬件环境上执行

## 避免不必要的计算

这部分主要指[增量计算](../data-modeling-and-computation/computation/incremental-compute-principal.md)，这同样依赖业务的先验知识（数据变化的pattern，具体计算结构的设计和调整）
