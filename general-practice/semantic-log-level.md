# Semantic log level 规范

本文用以指导log level在「客户端/编辑器/渲染器场景」项目中的使用，并记录个人理解。预计会根据实际工程情况持续更新。

## error

出现预料之内的严重的问题，以至于用户的需求完全无法完成。

- 所谓「严重的问题」：因为一些重要因素没有满足，这些因素无法被用户交互之前有效check，导致用户无法实际上实现需求
- 所谓「预料之内」：问题被已有逻辑正确处理，直接退出了这部分逻辑，没有panic

案例

- 导入一个不存在的文件
- 某个必要的后端服务器无法访问

## warning

出现预料之内的不严重的问题，用户的需求不完美的完成了 或者 将会以不完美的方式完成。

- 所谓「不严重的问题」：可以被用户感知到的性能下降和应用层面可以接受的结果错误
- 所谓「预料之内」：问题被已有逻辑正确处理，比如之前就编写了特别的降级逻辑（best effort）来应对这样的情况

案例

- texture allocator allocate 失败，但是渲染正确的处理了失败情况，用户看到allcoate失败的texture是默认纯色
- gltf 导入遇到了不支持但是不要求支持的extension
- 渲染器支持更高性能的渲染方式，但是因为平台限制无法提供
- 某一帧的渲染时间严重过长

> error和warning 需要主动通知用户出现这种情况，比如界面上出现异常状态标识。引导用户了解详细信息（比如打开控制台）。其他更低等级的log，不会主动通知，但是用户也可以查看。
>
> error类型的问题出现后，可能应该直接弹出警告信息。

## info

少见的重要事件，满足以下任意条件

- 出现有可能被用户感知到性能下降和可以忽略的正确性问题
- 涉及到重要的状态切换，上下文初始化和卸载，鉴权成功等

案例

- 以某个身份成功登陆
- 切换底层实现类型
- texture allocator触发扩容

## debug

verbose的debug信息，即便是debug编译也是默认关闭的。只有在有进一步debug需求时，通过动态或者静态配置，在单独的逻辑模块内部临时启用。

在release 编译时需要保持静态关闭
